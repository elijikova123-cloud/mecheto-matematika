<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ—á–µ—Ç–æ —Å—ä–±–∏—Ä–∞ –º–µ–¥ - –ê–Ω–∏–º–∏—Ä–∞–Ω–∞ –ì–æ—Ä–∞</title>
    <style>
        body { 
            margin: 0; padding: 10px;
            /* –ê–Ω–∏–º–∏—Ä–∞–Ω —Ñ–æ–Ω –Ω–∞ –≥–æ—Ä–∞ */
            background: #2e8b57 url('https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExNHJpbm5ueHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4JnB0PWEmZXA9djFfaW50ZXJuYWxfZ2lmX2J5X2lkJmN0PWc/3o7TKVUn7iM8FMEU24/giphy.gif') no-repeat center center fixed;
            background-size: cover;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }

        #game-container { 
            width: 95%; max-width: 800px;
            background: rgba(255, 255, 255, 0.92); 
            padding: 25px; border-radius: 40px; 
            box-shadow: 0 15px 50px rgba(0,0,0,0.5);
            border: 8px solid #5d4037; text-align: center;
            position: relative; overflow: hidden;
        }

        /* –ï–∫—Ä–∞–Ω–∏ */
        #start-screen { display: block; }
        #game-screen { display: none; }

        .menu-grid {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 15px; margin-top: 20px;
        }

        .menu-btn {
            background: #ff9800; color: white; border: none;
            padding: 20px; border-radius: 20px; font-size: 1.2rem;
            cursor: pointer; transition: 0.3s; box-shadow: 0 5px 0 #e65100;
        }
        .menu-btn:hover { transform: scale(1.1); background: #fb8c00; }

        /* –ì–µ—Ä–æ–∏ */
        .bear-area { 
            width: 180px; height: 180px; margin: 0 auto;
            background-size: contain; background-repeat: no-repeat; background-position: center;
            transition: transform 0.3s;
        }
        /* –õ–∏–Ω–∫ –∫—ä–º –º–µ—á–µ */
        #bear { background-image: url('https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNXA0amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa20/v4/giphy.gif'); }
        
        .bees-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNXA0amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa200amZxa20/v4/giphy.gif') center no-repeat;
            background-size: 200px; display: none; z-index: 10; pointer-events: none;
        }

        /* –ó–∞–¥–∞—á–∞ –∏ –ì—ä—Ä–Ω–µ—Ç–∞ */
        #question-box {
            background: #fff; border: 5px solid #ffa000;
            border-radius: 25px; padding: 15px; margin: 15px 0;
        }
        #question { font-size: 3rem; color: #333; }

        .pots-grid { 
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px;
        }
        .pot { 
            background: #ffc107; padding: 15px 5px; border-radius: 15px 15px 50% 50%;
            border: 3px solid #8d6e63; font-size: 1.4rem; font-weight: bold;
            cursor: pointer; transition: 0.2s; box-shadow: 0 4px 0 #795548;
        }
        .pot:hover { transform: scale(1.1); background: #ffd54f; }

        .stats-bar {
            display: flex; justify-content: space-around;
            background: #fff9c4; padding: 10px; border-radius: 15px; margin-bottom: 10px;
            border: 2px solid #fbc02d; font-weight: bold;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="bees-layer" class="bees-overlay"></div>

    <div id="start-screen">
        <h1>üå≤ –ì–æ—Ä—Å–∫–æ —É—á–∏–ª–∏—â–µ üçØ</h1>
        <p>–ò–∑–±–µ—Ä–∏ —Ç–∞–±–ª–∏—Ü–∞, –∑–∞ –¥–∞ –ø–æ–º–æ–≥–Ω–µ—à –Ω–∞ –º–µ—á–µ—Ç–æ!</p>
        <div class="menu-grid" id="menu-grid"></div>
    </div>

    <div id="game-screen">
        <div class="stats-bar">
            <div>üå≥ –¢–∞–±–ª–∏—Ü–∞ —Å <span id="level">2</span></div>
            <div>‚ù§Ô∏è –ì—Ä–µ—à–∫–∏: <span id="errors" style="color:red">0</span>/3</div>
            <div>‚≠ê –ú–µ–¥: <span id="progress">0</span>/10</div>
        </div>

        <div class="bear-area" id="bear"></div>
        
        <div id="question-box">
            <div id="task-type" style="color: #ef6c00; font-weight: bold;">–£–º–Ω–æ–∂–µ–Ω–∏–µ üêù</div>
            <div id="question">?</div>
        </div>

        <div class="pots-grid" id="pots"></div>
        <button onclick="location.reload()" style="margin-top:20px; padding:10px; cursor:pointer;">‚¨Ö –ö—ä–º –∏–∑–±–æ—Ä –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞</button>
    </div>
</div>

<script>
    let currentNumber = 2;
    let errors = 0;
    let solvedInLevel = 0;
    let targetAnswer = 0;

    // –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –º–µ–Ω—é—Ç–æ
    const menuGrid = document.getElementById('menu-grid');
    for (let i = 2; i <= 10; i++) {
        let btn = document.createElement('button');
        btn.className = 'menu-btn';
        btn.innerText = '–¢–∞–±–ª–∏—Ü–∞ —Å ' + i;
        btn.onclick = () => startGame(i);
        menuGrid.appendChild(btn);
    }

    function startGame(num) {
        currentNumber = num;
        errors = 0;
        solvedInLevel = 0;
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'block';
        updateUI();
        generateTask();
    }

    function generateTask() {
        let randomNum = Math.floor(Math.random() * 10) + 1;
        if (solvedInLevel < 5) {
            document.getElementById('task-type').innerText = "–£–º–Ω–æ–∂–µ–Ω–∏–µ üêù";
            targetAnswer = randomNum * currentNumber;
            document.getElementById('question').innerText = randomNum + " √ó " + currentNumber;
            renderPots('mul');
        } else {
            document.getElementById('task-type').innerText = "–î–µ–ª–µ–Ω–∏–µ üçØ";
            let dividend = randomNum * currentNumber;
            targetAnswer = randomNum;
            document.getElementById('question').innerText = dividend + " : " + currentNumber;
            renderPots('div');
        }
    }

    function renderPots(mode) {
        const grid = document.getElementById('pots');
        grid.innerHTML = '';
        for (let i = 1; i <= 10; i++) {
            let val = (mode === 'mul') ? (i * currentNumber) : i;
            let pot = document.createElement('div');
            pot.className = 'pot';
            pot.innerText = val;
            pot.onclick = () => check(val);
            grid.appendChild(pot);
        }
    }

    function check(val) {
        const bear = document.getElementById('bear');
        const bees = document.getElementById('bees-layer');

        if (val === targetAnswer) {
            solvedInLevel++;
            // –†–∞–¥–æ—Å—Ç –Ω–∞ –º–µ—á–µ—Ç–æ
            bear.style.transform = "scale(1.3) rotate(15deg)";
            setTimeout(() => bear.style.transform = "scale(1) rotate(0deg)", 400);
            
            if (solvedInLevel >= 10) {
                alert("–ë–†–ê–í–û! –¢–∏ –Ω–∞–ø—ä–ª–Ω–∏ –≤—Å–∏—á–∫–∏ –≥—ä—Ä–Ω–µ—Ç–∞!");
                location.reload();
            }
        } else {
            errors++;
            if (errors >= 3) {
                bees.style.display = 'block'; // –ü—á–µ–ª–∏—Ç–µ –∏–¥–≤–∞—Ç!
                setTimeout(() => {
                    bees.style.display = 'none';
                    alert("–û–ø–∞! –ü—á–µ–ª–∏—Ç–µ –¥–æ–π–¥–æ—Ö–∞. –û–ø–∏—Ç–∞–π –ø–∞–∫!");
                    location.reload();
                }, 2000);
            }
        }
        updateUI();
        generateTask();
    }

    function updateUI() {
        document.getElementById('level').innerText = currentNumber;
        document.getElementById('errors').innerText = errors;
        document.getElementById('progress').innerText = solvedInLevel;
    }
</script>
</body>
</html>
