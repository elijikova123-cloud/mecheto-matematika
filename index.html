<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>–ú–µ—á–µ—Ç–æ —Å—ä–±–∏—Ä–∞ –º–µ–¥ - –£–º–Ω–æ–∂–µ–Ω–∏–µ –∏ –î–µ–ª–µ–Ω–∏–µ</title>
    <style>
        body { 
            margin: 0; padding: 0;
            background: linear-gradient(to bottom, #87CEEB 0%, #2e8b57 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex; justify-content: center; align-items: center;
        }
        #game-container { 
            max-width: 900px; background: rgba(255, 255, 255, 0.95); 
            padding: 30px; border-radius: 30px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 8px solid #8b4513; text-align: center;
        }
        .stats-bar {
            background: #fffacd; padding: 10px; border-radius: 15px;
            display: flex; justify-content: space-around;
            font-weight: bold; font-size: 1.2rem; margin-bottom: 20px;
            border: 2px dashed #daa520;
        }
        .bear-area { font-size: 6rem; margin: 10px; transition: transform 0.3s; }
        #question { 
            font-size: 4rem; background: #ffffff; border-radius: 20px;
            padding: 10px 40px; display: inline-block;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1); color: #333;
        }
        .type-label { font-size: 1.5rem; color: #d2691e; font-weight: bold; margin: 10px 0; }
        .pots-grid { 
            display: grid; grid-template-columns: repeat(5, 1fr); 
            gap: 15px; margin-top: 20px; 
        }
        .pot { 
            background: #ffcc33; padding: 20px 10px; border-radius: 15px 15px 40% 40%;
            border: 4px solid #b8860b; font-size: 1.5rem; font-weight: bold;
            cursor: pointer; transition: all 0.2s;
        }
        .pot:hover { transform: translateY(-5px); background: #ffd700; }
        .error-text { color: #ff0000; }
    </style>
</head>
<body>

<div id="game-container">
    <h1>üçØ –ú–µ—á–µ—Ç–æ —Å—ä–±–∏—Ä–∞ –º–µ–¥</h1>
    
    <div class="stats-bar">
        <div>üå≥ –ß–∏—Å–ª–æ: <span id="level">2</span></div>
        <div>‚ù§Ô∏è –ì—Ä–µ—à–∫–∏: <span id="errors" class="error-text">0</span>/3</div>
        <div>‚≠ê –ó–∞–¥–∞—á–∏: <span id="progress">0</span>/10</div>
    </div>

    <div class="bear-area" id="bear">üêª</div>
    <div class="type-label" id="task-type">–£–º–Ω–æ–∂–µ–Ω–∏–µ</div>
    <div id="question">? √ó ?</div>

    <div class="pots-grid" id="pots"></div>
</div>

<script>
    let currentNumber = 2; // –ó–∞–ø–æ—á–≤–∞–º–µ —Å —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ —Å 2
    let errors = 0;
    let solvedInLevel = 0;
    let targetAnswer = 0;

    // –ó–≤—É–∫–æ–≤–∏ –µ—Ñ–µ–∫—Ç–∏
    function playSound(type) {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        if (type === 'win') {
            osc.type = 'triangle';
            osc.frequency.setValueAtTime(520, ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(880, ctx.currentTime + 0.2);
        } else {
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, ctx.currentTime);
        }
        gain.gain.setValueAtTime(0.1, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.4);
        osc.connect(gain); gain.connect(ctx.destination);
        osc.start(); osc.stop(ctx.currentTime + 0.4);
    }

    function generateTask() {
        let randomNum = Math.floor(Math.random() * 10) + 1;
        
        if (solvedInLevel < 5) {
            // –ü—ä—Ä–≤–∏—Ç–µ 5 –∑–∞–¥–∞—á–∏ —Å–∞ —É–º–Ω–æ–∂–µ–Ω–∏–µ
            document.getElementById('task-type').innerText = "–£–º–Ω–æ–∂–µ–Ω–∏–µ";
            targetAnswer = randomNum * currentNumber;
            document.getElementById('question').innerText = `${randomNum} √ó ${currentNumber} = ?`;
            renderPots('mul');
        } else {
            // –°–ª–µ–¥–≤–∞—â–∏—Ç–µ 5 –∑–∞–¥–∞—á–∏ —Å–∞ –¥–µ–ª–µ–Ω–∏–µ
            document.getElementById('task-type').innerText = "–î–µ–ª–µ–Ω–∏–µ";
            let dividend = randomNum * currentNumber;
            targetAnswer = randomNum;
            document.getElementById('question').innerText = `${dividend} : ${currentNumber} = ?`;
            renderPots('div');
        }
    }

    function renderPots(mode) {
        const grid = document.getElementById('pots');
        grid.innerHTML = '';
        for (let i = 1; i <= 10; i++) {
            let val = (mode === 'mul') ? (i * currentNumber) : i;
            let pot = document.createElement('div');
            pot.className = 'pot';
            pot.innerText = val;
            pot.onclick = () => check(val);
            grid.appendChild(pot);
        }
    }

    function check(val) {
        if (val === targetAnswer) {
            playSound('win');
            solvedInLevel++;
            document.getElementById('bear').style.transform = "scale(1.2)";
            setTimeout(() => document.getElementById('bear').style.transform = "scale(1)", 300);
            
            if (solvedInLevel >= 10) {
                alert(`–ë—Ä–∞–≤–æ! –¢–∏ –Ω–∞—É—á–∏ –≤—Å–∏—á–∫–æ –∑–∞ —á–∏—Å–ª–æ—Ç–æ ${currentNumber}!`);
                currentNumber++;
                solvedInLevel = 0;
                errors = 0;
                if (currentNumber > 10) alert("–ü–û–ë–ï–î–ê! –¢–∏ —Å–∏ —Ü–∞—Ä –Ω–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞—Ç–∞!");
            }
            update();
            generateTask();
        } else {
            playSound('lose');
            errors++;
            update();
            if (errors >= 3) {
                alert("–û–ø–∞! –ü—á–µ–ª–∏—Ç–µ –¥–æ–π–¥–æ—Ö–∞. –û–ø–∏—Ç–∞–π –Ω–∏–≤–æ—Ç–æ –æ—Ç–Ω–∞—á–∞–ª–æ.");
                solvedInLevel = 0;
                errors = 0;
                update();
                generateTask();
            }
        }
    }

    function update() {
        document.getElementById('level').innerText = currentNumber;
        document.getElementById('errors').innerText = errors;
        document.getElementById('progress').innerText = solvedInLevel;
    }

    update();
    generateTask();
</script>
</body>
</html>
