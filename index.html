<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>–ú–µ—á–µ—Ç–æ —Å—ä–±–∏—Ä–∞ –º–µ–¥ –≤ –≥–æ—Ä–∞—Ç–∞</title>
    <style>
        /* –¶—è–ª–æ—Å—Ç–µ–Ω –≥–æ—Ä—Å–∫–∏ —Ñ–æ–Ω */
        body { 
            margin: 0; padding: 0;
            background: #2e8b57; /* –†–µ–∑–µ—Ä–≤–µ–Ω —Ü–≤—è—Ç */
            /* –°—ä–∑–¥–∞–≤–∞–º–µ –≥–æ—Ä—Å–∫–∞ –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∏ –∏ —Ü–≤–µ—Ç–æ–≤–µ */
            background-image: 
                linear-gradient(to bottom, rgba(135, 206, 235, 0.8), rgba(46, 139, 87, 0.9)),
                url('https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1351&q=80');
            background-size: cover;
            background-attachment: fixed;
            min-height: 100vh;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            display: flex; justify-content: center; align-items: center;
        }

        #game-container { 
            max-width: 850px; 
            background: rgba(255, 255, 255, 0.92); 
            padding: 25px; 
            border-radius: 40px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            border: 10px solid #5d4037; /* –ö–∞—Ñ—è–≤–∞ —Ä–∞–º–∫–∞ –∫–∞—Ç–æ –¥—ä—Ä–≤–æ */
            text-align: center;
            position: relative;
        }

        h1 { color: #2e7d32; text-shadow: 1px 1px #fff; margin-top: 0; font-size: 2.2rem; }

        .stats-bar {
            background: #fff9c4; padding: 15px; border-radius: 20px;
            display: flex; justify-content: space-around;
            font-weight: bold; font-size: 1.1rem; margin-bottom: 20px;
            border: 3px solid #fbc02d; color: #5d4037;
        }

        /* –ú–µ—á–µ—Ç–æ */
        .bear-area { font-size: 7rem; margin: 5px; filter: drop-shadow(2px 4px 5px rgba(0,0,0,0.2)); }

        /* –ó–∞–¥–∞—á–∞—Ç–∞ */
        #question-box {
            background: #ffffff; border: 4px solid #ffa000;
            border-radius: 25px; padding: 15px 40px;
            display: inline-block; margin-bottom: 15px;
        }
        #question { font-size: 3.5rem; color: #333; margin: 0; }
        .type-label { font-size: 1.4rem; color: #ef6c00; font-weight: bold; margin-bottom: 5px; }

        /* –ì—ä—Ä–Ω–µ—Ç–∞—Ç–∞ —Å –º–µ–¥ */
        .pots-grid { 
            display: grid; grid-template-columns: repeat(5, 1fr); 
            gap: 15px; margin-top: 15px; 
        }
        .pot { 
            background: #ffc107; 
            padding: 15px 5px; 
            border-radius: 15px 15px 45% 45%;
            border: 5px solid #8d6e63; 
            font-size: 1.6rem; font-weight: bold; color: #5d4037;
            cursor: pointer; transition: all 0.2s;
            box-shadow: 0 4px 0 #795548;
            position: relative;
        }
        .pot:hover { transform: translateY(-5px) scale(1.05); background: #ffca28; }
        .pot:active { transform: translateY(2px); box-shadow: none; }

        /* –°–ø–µ—Ü–∏–∞–ª–µ–Ω —Å—Ç–∏–ª –∑–∞ –∑–∞–≥–ª–∞–≤–∏–µ—Ç–æ –Ω–∞ –Ω–∏–≤–æ—Ç–æ */
        .level-tag { color: #d32f2f; font-size: 1.3rem; }
    </style>
</head>
<body>

<div id="game-container">
    <h1>üå≤ –ú–µ—á–µ—Ç–æ —Å—ä–±–∏—Ä–∞ –º–µ–¥ –≤ –≥–æ—Ä–∞—Ç–∞ üçØ</h1>
    
    <div class="stats-bar">
        <div>üå≥ –¢–∞–±–ª–∏—Ü–∞ —Å: <span id="level" class="level-tag">2</span></div>
        <div>‚ù§Ô∏è –ì—Ä–µ—à–∫–∏: <span id="errors" style="color:red">0</span>/3</div>
        <div>‚≠ê –ù–∞–ø—ä–ª–Ω–µ–Ω–∏ –≥—ä—Ä–Ω–µ—Ç–∞: <span id="progress">0</span>/10</div>
    </div>

    <div class="bear-area" id="bear">üêª</div>
    
    <div id="question-box">
        <div class="type-label" id="task-type">–£–º–Ω–æ–∂–µ–Ω–∏–µ</div>
        <div id="question">2 √ó 1 = ?</div>
    </div>

    <div class="pots-grid" id="pots">
        </div>
</div>

<script>
    let currentNumber = 2;
    let errors = 0;
    let solvedInLevel = 0;
    let targetAnswer = 0;

    function playSound(type) {
        try {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            if (type === 'win') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(520, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(880, ctx.currentTime + 0.2);
            } else {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, ctx.currentTime);
            }
            gain.gain.setValueAtTime(0.1, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.4);
            osc.connect(gain); gain.connect(ctx.destination);
            osc.start(); osc.stop(ctx.currentTime + 0.4);
        } catch(e) { console.log("Audio not supported"); }
    }

    function generateTask() {
        let randomNum = Math.floor(Math.random() * 10) + 1;
        
        if (solvedInLevel < 5) {
            document.getElementById('task-type').innerText = "–£–º–Ω–æ–∂–µ–Ω–∏–µ üêù";
            targetAnswer = randomNum * currentNumber;
            document.getElementById('question').innerText = `${randomNum} √ó ${currentNumber}`;
            renderPots('mul');
        } else {
            document.getElementById('task-type').innerText = "–î–µ–ª–µ–Ω–∏–µ üçØ";
            let dividend = randomNum * currentNumber;
            targetAnswer = randomNum;
            document.getElementById('question').innerText = `${dividend} : ${currentNumber}`;
            renderPots('div');
        }
    }

    function renderPots(mode) {
        const grid = document.getElementById('pots');
        grid.innerHTML = '';
        for (let i = 1; i <= 10; i++) {
            let val = (mode === 'mul') ? (i * currentNumber) : i;
            let pot = document.createElement('div');
            pot.className = 'pot';
            pot.innerText = val;
            pot.onclick = () => check(val);
            grid.appendChild(pot);
        }
    }

    function check(val) {
        if (val === targetAnswer) {
            playSound('win');
            solvedInLevel++;
            const bear = document.getElementById('bear');
            bear.style.transform = "scale(1.3) rotate(10deg)";
            setTimeout(() => bear.style.transform = "scale(1) rotate(0deg)", 300);
            
            if (solvedInLevel >= 10) {
                alert(`–ë—Ä–∞–≤–æ! –ú–µ—á–µ—Ç–æ —Å–µ –Ω–∞—è–¥–µ —Å –º–µ–¥ –∑–∞ —á–∏—Å–ª–æ—Ç–æ ${currentNumber}! –ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ –Ω–∞–ø—Ä–µ–¥!`);
                currentNumber++;
                solvedInLevel = 0;
                errors = 0;
                if (currentNumber > 10) {
                    alert("–¢–ò –°–ò –®–ê–ú–ü–ò–û–ù! –ú–µ—á–µ—Ç–æ –µ –Ω–∞–π-—â–∞—Å—Ç–ª–∏–≤–æ—Ç–æ –≤ —Ü—è–ª–∞—Ç–∞ –≥–æ—Ä–∞!");
                    currentNumber = 2;
                }
            }
            update();
            generateTask();
        } else {
            playSound('lose');
            errors++;
            update();
            if (errors >= 3) {
                alert("–û–ø–∞! –ü—á–µ–ª–∏—Ç–µ —Ç–µ –Ω–∞—Å—Ç–∏–≥–Ω–∞—Ö–∞. –î–∞ –æ–ø–∏—Ç–∞–º–µ —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –æ—Ç–Ω–∞—á–∞–ª–æ.");
                solvedInLevel = 0;
                errors = 0;
                update();
                generateTask();
            }
        }
    }

    function update() {
        document.getElementById('level').innerText = currentNumber;
        document.getElementById('errors').innerText = errors;
        document.getElementById('progress').innerText = solvedInLevel;
    }

    update();
    generateTask();
</script>
</body>
</html>
